This script is a bit more involved and requires an additional timer and a state
file in case the script execution nears the 30 minute mark.